<!DOCTYPE html>
<html lang="en">
<head>
    <title>Networking</title>
</head>
<body>



    <script>
        // making a network request of data form jsonplaceholder
        // true is for asynchronous 
        // false is for synchronous


        // using eventhandler to handle the data called onreadystatechange


        // function GetData(url,callback){


        //     let data= new XMLHttpRequest();
        //     data.open("GET",url,true);
        //     data.send();
            
        //     data.onreadystatechange=function(){
        //         if(data.readyState===4 && data.status===200){
        //             callback(JSON.parse(data.responseText));
        //         }
        //     }

        // }

        // using a callback to use different url to get data than writing same code again 

        // GetData("https://jsonplaceholder.typicode.com/users",function(users){
        //     console.log(users);
        // });
        // GetData("https://jsonplaceholder.typicode.com/posts",function(posts){
        //     console.log(posts);
        // });



        // this will make the data be presented in order
        // even though it is asynchronous the data may be missed up because of the time
        // so you can do callback hell to put them in order


        // GetData("https://jsonplaceholder.typicode.com/users",function(users){
        //     console.log(users);

        //     GetData("https://jsonplaceholder.typicode.com/posts",function(posts){
        //        console.log(posts);
        //     });
        // });





        // PROMISES
        // by using promises we can request network simply

        // resolve if task is true
        // reject if task is false

        // use .then if task is resolved
        //     .catch if task is rejected

        // let prom=new Promise(function(resolve,reject){
        //     let task=false;
        //     if(task===true){
        //         resolve("This is resolved");
        //     }
        //     else{
        //         reject("Rejected,there  were some issues");
        //     }

        //     return prom;
        // });
        // prom
        // .then(function(data){
        //     console.log(data);
        // })
        // .catch(function(data){
        //     console.log(data);
        // })




        function getData(url,err){
            
            let p = new Promise(function(resolve,reject){

            let data= new XMLHttpRequest();
            data.open("GET",url,true);
            data.send();
            
            data.onreadystatechange=function(){

               if(data.readyState===4){
                if(data.status===200){
                    resolve(JSON.parse(data.responseText));
                }
                else{
                    reject("Rejected there were some problems");
                }
               }
            }  
            })

            return p;

        }

        getData("https://jsonplaceholder.typicode.com/users")
        .then(function(users){
            console.log(users);
        })
        .catch(function(err){
            console.log(err);
        })


      
    </script>
    
</body>
</html>